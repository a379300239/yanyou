(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editRoute/modify_routeInformation/add_site/add_site"],{"1e73":function(t,e,i){"use strict";(function(t){i("6954"),i("921b");n(i("66fd"));var e=n(i("ff50"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},"6cb2":function(t,e,i){"use strict";i.r(e);var n=i("b18c"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"7c52":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n})},"90f5":function(t,e,i){},b18c:function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return Promise.all([i.e("common/vendor"),i.e("components/QS-inputs-split/elements/QS-input/index")]).then(i.bind(null,"9069"))},s=function(){return Promise.all([i.e("common/vendor"),i.e("components/QS-inputs-split/elements/QS-picker-custom/index")]).then(i.bind(null,"8f8c"))},a=function(){return Promise.all([i.e("common/vendor"),i.e("components/QS-inputs-split/elements/QS-textarea/index")]).then(i.bind(null,"996a"))},r={data:function(){return{routeId:"",userInformation:"",userRoute:"",routeInformaion:"",dayId:"",siteType:"",siteCity:"",typeDate:[{name:"景点",key:"site"},{name:"美食",key:"food"},{name:"住宿",key:"hotel"},{name:"交通",key:"traffic"},{name:"自定义",key:"custom"}],scrollHeight:"",siteInforamtion:"",isNoDate:!0,isLoading:!0,siteIntroductionBaseUrl:"../../../siteIntroduction/siteIntroduction?isEdit=true&siteName=",trafficData:{siteType:"traffic",startPlace:"",endPlace:"",vehicle:"",remark:""},vehcile:["飞机","汽车","铁路","地铁","其他"],currentVehcileId:-1,customData:{siteType:"custom",title:"",content:""}}},methods:{onLoad:function(e){var i=this;this.userInformation=t.getStorageSync("currentUser"),this.routeId=e.routeId,this.userRoute=t.getStorageSync(this.userInformation.userName+"_route"),this.routeInformaion=this.userRoute[this.routeId],this.siteCity=this.routeInformaion.routePlace,this.dayId=e.dayId,this.siteType=e.siteType,this.chage_type(this.siteType),t.$on("routeCity",function(t){i.siteCity=t,i.chage_type(i.siteType)}),t.$on("addSite",function(t){i.add_site(t)})},onShow:function(){},onReady:function(){this.get_scrollHeight()},onUnload:function(){t.$off("routeCity"),t.$off("addSite")},get_scrollHeight:function(){var e=this;t.getSystemInfo({success:function(i){var n=t.createSelectorQuery().in(e);n.select("#siteChooseView").boundingClientRect(function(t){e.scrollHeight="".concat(i.windowHeight-t.top,"px")}).exec()}})},start_operate:function(){this.siteInforamtion="",this.isLoading=!0,this.isNoDate=!0},over_operate:function(t){this.isLoading=!1,this.isNoDate=!t},chage_type:function(e){var i=this;this.start_operate(),this.siteType=e,"food"!=e&&"site"!=e&&"hotel"!=e||t.request({url:getApp().globalData.baseUrl+"/"+this.siteCity+"/"+this.siteType,success:function(t){i.siteInforamtion=t.data._root_},complete:function(){i.siteInforamtion?i.over_operate(!0):i.over_operate(!1)}}),"traffic"!=e&&"custom"!=e||this.over_operate(!0)},add_site:function(t){t&&(n("log",this.dayId," at pages\\editRoute\\modify_routeInformation\\add_site\\add_site.vue:380"),this.routeInformaion.route[this.dayId].push(t),this.save())},chooseVehcileChange:function(t){this.currentVehcileId=t.detail.value},save_traffic:function(){-1!=this.currentVehcileId&&""!=this.trafficData.startPlace&&""!=this.trafficData.endPlace?(this.trafficData.vehicle=this.vehcile[this.currentVehcileId],this.add_site(this.trafficData),t.showToast({title:"保存成功"}),this.currentVehcileId=-1,this.trafficData={siteType:"traffic",startPlace:"",endPlace:"",vehicle:"",remark:""}):t.showToast({title:"请输入完整",icon:"none"})},save_custom:function(){""!=this.customData.title&&""!=this.customData.content?(this.add_site(this.customData),t.showToast({title:"保存成功"}),this.customData={siteType:"custom",title:"",content:""}):t.showToast({title:"请输入完整",icon:"none"})},save:function(){this.userRoute[this.routeId]=this.routeInformaion,t.setStorageSync(this.userInformation.userName+"_route",this.userRoute)}},components:{QSInput:o,QSPickerCustom:s,QSTextarea:a}};e.default=r}).call(this,i("6e42")["default"],i("0de9")["default"])},edae:function(t,e,i){"use strict";var n=i("90f5"),o=i.n(n);o.a},ff50:function(t,e,i){"use strict";i.r(e);var n=i("7c52"),o=i("6cb2");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("edae");var a,r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports}},[["1e73","common/runtime","common/vendor"]]]);