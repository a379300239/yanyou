(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editRoute/modifySite/modifySite"],{5994:function(t,e,o){},"6d3a":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return Promise.all([o.e("common/vendor"),o.e("components/drag-sort/index")]).then(o.bind(null,"5822"))},n={data:function(){return{routeId:"",userInformation:"",userRoute:"",routeInformaion:"",dayId:"",isOperating:!1,scrollHeight:"",isChoosedDay:!1,menuContent:[{text:"增加景点",active:!1},{text:"删除景点",active:!1}],isPopMenu:!0,isPop:!0,isPopUp:!1,addSiteData:[{title:"景点",url:"../../../static/modifySite/site_c.png"},{title:"美食",url:"../../../static/modifySite/food_c.png"},{title:"住宿",url:"../../../static/modifySite/hotel_c.png"},{title:"交通",url:"../../../static/modifySite/traffic_c.png"},{title:"自定义",url:"../../../static/modifySite/custom_c.png"}],iconUrl:"../../../static/modifySite/",iconUrl_houZhui:".png",isDeleting:!1,deleteArray:[]}},methods:{onLoad:function(e){this.userInformation=t.getStorageSync("currentUser"),this.routeId=e.routeId,this.userRoute=t.getStorageSync(this.userInformation.userName+"_route"),this.routeInformaion=this.userRoute[this.routeId],this.change_day(e.dayId)},onShow:function(){this.userRoute=t.getStorageSync(this.userInformation.userName+"_route"),this.routeInformaion=this.userRoute[this.routeId]},onReady:function(){this.get_scrollHeight()},onBackPress:function(){return this.isPopUp?(this.close_addView(),!0):!!this.$refs.fab.isShow&&(this.$refs.fab.close(),!0)},get_nextDate:function(t,e){var o=t.split("-"),i=new Date(parseInt(o[0]),parseInt(o[1])-1,parseInt(o[2])),n=new Date(Date.parse(i)+24*e*60*60*1e3),r=(n.getFullYear(),n.getMonth()+1);e=n.getDate();return r+"月"+e+"日"},change_day:function(t){this.dayId=t},get_scrollHeight:function(){var e=this;t.getSystemInfo({success:function(o){var i=t.createSelectorQuery().in(e);i.select("#routeEdit_left").boundingClientRect(function(t){e.scrollHeight="".concat(o.windowHeight-t.top,"px")}).exec()}})},click_fab:function(){},click_menuButton:function(t){switch(t.index){case 0:this.add_site();break;case 1:this.delete_site();break;default:break}},over_operate:function(){this.isOperating=!1,this.isPopMenu=!0},start_operate:function(){this.isOperating=!0,this.isPopMenu=!1},add_site:function(){this.isPopUp=!0,this.start_operate()},open_addChooseView:function(t){switch(t){case 0:this.open_choosePage("site");break;case 1:this.open_choosePage("food");break;case 2:this.open_choosePage("hotel");break;case 3:this.open_choosePage("traffic");break;case 4:this.open_choosePage("custom");break;default:break}},open_choosePage:function(e){t.navigateTo({url:"../modify_routeInformation/add_site/add_site?routeId="+this.routeId+"&dayId="+this.dayId+"&siteType="+e})},moveHandle:function(){},close_addView:function(){this.isPopUp=!1,this.over_operate()},modify_site:function(t,e){this.routeInformaion.route[this.dayId].splice(e+Number(t<e),0,this.routeInformaion.route[this.dayId][t]),this.routeInformaion.route[this.dayId].splice(t+Number(t>e),1),this.save()},onDragSite:function(t){t.frontData||0==t.frontData||(t.frontData=-1),this.modify_site(t.data,t.frontData+1)},delete_site:function(){this.start_operate(),this.isDeleting=!0,this.deleteArray=[];for(var t=0;t<this.routeInformaion.route[this.dayId].length;t++)this.deleteArray.push(!1)},choose_delete:function(t){this.deleteArray[t]=!0},confirm_delete:function(){for(var t=[],e=0;e<this.routeInformaion.route[this.dayId].length;e++)this.deleteArray[e]||t.push(this.routeInformaion.route[this.dayId][e]);this.routeInformaion.route[this.dayId]=t,this.save(),this.over_operate(),this.isDeleting=!1},cancel_delete:function(){this.over_operate(),this.isDeleting=!1},save:function(){this.userRoute[this.routeId]=this.routeInformaion,t.setStorageSync(this.userInformation.userName+"_route",this.userRoute)}},computed:{},components:{dragSort:i}};e.default=n}).call(this,o("6e42")["default"])},"7c12":function(t,e,o){"use strict";o.r(e);var i=o("c734"),n=o("de08");for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);o("d6e2");var a,s=o("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=u.exports},c734:function(t,e,o){"use strict";var i={"uni-fab":()=>o.e("components/uni-fab/uni-fab").then(o.bind(null,"86ee"))},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.routeInformaion.route,function(e,o){var i=t.get_nextDate(t.routeInformaion.routeStartTime,o);return{$orig:t.__get_orig(e),m0:i}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},r=[];o.d(e,"b",function(){return n}),o.d(e,"c",function(){return r}),o.d(e,"a",function(){return i})},d6e2:function(t,e,o){"use strict";var i=o("5994"),n=o.n(i);n.a},daa6:function(t,e,o){"use strict";(function(t){o("6954"),o("921b");i(o("66fd"));var e=i(o("7c12"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},de08:function(t,e,o){"use strict";o.r(e);var i=o("6d3a"),n=o.n(i);for(var r in i)"default"!==r&&function(t){o.d(e,t,function(){return i[t]})}(r);e["default"]=n.a}},[["daa6","common/runtime","common/vendor"]]]);